<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>West of England Connectivity Tool</title>
  
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.5.0/nouislider.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
  
  <link rel="stylesheet" href="styles.css">
  
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.5.0/nouislider.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Turf.js/6.5.0/turf.min.js"></script>
  <script src="https://unpkg.com/@mapbox/togeojson@0.16.0/togeojson.js"></script>
  <script src="https://unpkg.com/proj4"></script>
  <script src="https://unpkg.com/proj4leaflet"></script>
</head>
<body>
  <div id="map"></div>
  <div id="panel-container">
    <div id="Scores" class="panel">
      <button class="panel-header">Connectivity Scores</button>
      <div id="panel-content">
        <label for="yearScoresDropdown" class="large-font">Year:</label>
        <select id="yearScoresDropdown" class="medium-font">
          <option value="2024 - MCA">2024 - MCA</option>
          <option value="2023 - MCA">2023 - MCA</option>
          <option value="2022 - MCA">2022 - MCA</option>
          <option value="2019 - MCA">2019 - MCA</option>
          <option value="2024 - DfT">2024 - DfT</option>
          <option value="2024 - MCA - DfT">2024 - MCA - DfT</option>
          <option value="2023-2024 - MCA">2023-2024 - MCA</option>
          <option value="2019-2024 - MCA">2019-2024 - MCA</option>
          <option value="2022-2023 - MCA">2022-2023 - MCA</option>
          <option value="2019-2023 - MCA">2019-2023 - MCA</option>
          <option value="2019-2022 - MCA">2019-2022 - MCA</option>
        </select>
        <br>
        <label for="purposeScoresDropdown" class="large-font">Purpose of Travel:</label>
        <select id="purposeScoresDropdown" class="medium-font">
          <option value="All">All Amenities</option>
          <option value="Edu">Education</option>
          <option value="Emp">Employment</option>
          <option value="HSt">High Street</option>
          <option value="Hth">Health</option>
        </select>
        <br>
        <label for="modeScoresDropdown" class="large-font">Mode of Travel:</label>
        <select id="modeScoresDropdown" class="medium-font">
          <option value="To">All Modes</option>
          <option value="Wa">Walk</option>
          <option value="Cy">Cycle</option>
          <option value="PT">Public Transport</option>
          <option value="Ca">Car</option>
        </select>
        <button type="button" class="collapsible">Settings</button>
        <div class="collapsible-content">
          <label for="layerTransparencySliderScores" class="medium-font">Layer Transparency:</label>
          <div class="field-container">
            <div>
              <div id="layerTransparencySliderScores"></div>
              <div class="slider-labels">
                <span>0%</span>
                <span id="layerTransparencyValueScores">50%</span>
                <span>100%</span>
              </div>
            </div>
          </div>
          <br>
          <label for="opacityFieldScoresDropdown" class="medium-font">Link Hexagon Transparency to:</label>
          <select id="opacityFieldScoresDropdown" class="small-font">
            <option value="None">-</option>
            <option value="pop">Population</option>
            <option value="IMDScore">Index of Multiple Deprivation - Score</option>
            <option value="car_availability">Car Availability</option>
            <option value="pop_growth">Population Growth</option>
          </select>
          <br>
          <div class="field-container">
            <div>
              <div id="opacityRangeScoresSlider"></div>
              <div class="slider-labels">
                <span id="opacityRangeScoresMin"></span>
                <span id="opacityRangeScoresMax"></span>
              </div>
            </div>
          </div>
          <div class="field-container">
            <div class="button-container">
              <button id="inverseOpacityScaleScoresButton" class="small-button">Inverse Scale</button>
            </div>
          </div>
          <br>
          <label for="outlineFieldScoresDropdown" class="medium-font">Link Hexagon Outline to:</label>
          <select id="outlineFieldScoresDropdown" class="small-font">
            <option value="None">-</option>
            <option value="IMDScore">Index of Multiple Deprivation - Score</option>
            <option value="pop">Population</option>
            <option value="car_availability">Car Availability</option>
            <option value="pop_growth">Population Growth</option>
          </select>
          <br>
          <div class="field-container">
            <div>
              <div id="outlineRangeScoresSlider"></div>
              <div class="slider-labels">
                <span id="outlineRangeScoresMin"></span>
                <span id="outlineRangeScoresMax"></span>
              </div>
            </div>
          </div>
          <div class="field-container">
            <div class="button-container">
              <button id="inverseOutlineScaleScoresButton" class="small-button">Inverse Scale</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="Amenities" class="panel">
      <button class="panel-header">Journey Time Catchments - Amenities</button>
      <div id="panel-content">
        <label for="yearAmenitiesDropdown" class="large-font">Year:</label>
        <select id="yearAmenitiesDropdown" class="medium-font">
          <option value="2024">2024</option>
        </select>
        <br>
        <label for="modeAmenitiesDropdown" class="large-font">Mode of Travel:</label>
        <select id="modeAmenitiesDropdown" class="medium-font">
          <option value="Wa">Walk</option>
          <option value="Cy">Cycle</option>
          <option value="PT">Public Transport</option>
          <option value="Ca">Car</option>
        </select>
        <br>
        <label class="large-font">Amenities:</label>
        <div class="dropdown">
          <button type="button" class="dropdown-toggle" id="amenitiesDropdown">\u00A0</button>
          <div class="dropdown-menu" id="amenitiesCheckboxesContainer">
            <label class="checkbox-label"><input type="checkbox" value="PriSch"> <span>Primary School</span></label>
            <label class="checkbox-label"><input type="checkbox" value="SecSch"> <span>Secondary School</span></label>
            <label class="checkbox-label"><input type="checkbox" value="FurEd"> <span>Further Education</span></label>
            <label class="checkbox-label"><input type="checkbox" value="Em500"> <span>Employment (500+ jobs)</span></label>
            <label class="checkbox-label"><input type="checkbox" value="Em5000"> <span>Employment (5000+ jobs)</span></label>
            <label class="checkbox-label"><input type="checkbox" value="StrEmp"> <span>Strategic Employment</span></label>
            <label class="checkbox-label"><input type="checkbox" value="CitCtr"> <span>City Centre</span></label>
            <label class="checkbox-label"><input type="checkbox" value="MajCtr"> <span>Major Centre</span></label>
            <label class="checkbox-label"><input type="checkbox" value="DisCtr"> <span>District Centre</span></label>
            <label class="checkbox-label"><input type="checkbox" value="GP"> <span>General Practice</span></label>
            <label class="checkbox-label"><input type="checkbox" value="Hos"> <span>Hospital</span></label>
          </div>
        </div>
<!--        <div class="field-container">
          <div class="button-container">
            <button id="selectAmenitiesFromMap" class="large-button">Select from Map</button>
          </div>
        </div>-->
        <button type="button" class="collapsible">Settings</button>
        <div class="collapsible-content">
          <label for="layerTransparencySliderAmenities" class="medium-font">Layer Transparency:</label>
          <div class="field-container">
            <div>
              <div id="layerTransparencySliderAmenities"></div>
              <div class="slider-labels">
                <span>0%</span>
                <span id="layerTransparencyValueAmenities">50%</span>
                <span>100%</span>
              </div>
            </div>
          </div>
          <br>
          <label for="opacityFieldAmenitiesDropdown" class="medium-font">Link Hexagon Transparency to:</label>
          <select id="opacityFieldAmenitiesDropdown" class="small-font">
            <option value="None">-</option>
            <option value="pop">Population</option>
            <option value="IMDScore">Index of Multiple Deprivation - Score</option>
            <option value="car_availability">Car Availability</option>
            <option value="pop_growth">Population Growth</option>
          </select>
          <br>
          <div class="field-container">
            <div>
              <div id="opacityRangeAmenitiesSlider"></div>
              <div class="slider-labels">
                <span id="opacityRangeAmenitiesMin"></span>
                <span id="opacityRangeAmenitiesMax"></span>
              </div>
            </div>
          </div>
          <div class="field-container">
            <div class="button-container">
              <button id="inverseOpacityScaleAmenitiesButton" class="small-button">Inverse Scale</button>
            </div>
          </div>
          <br>
          <label for="outlineFieldAmenitiesDropdown" class="medium-font">Link Hexagon Outline to:</label>
          <select id="outlineFieldAmenitiesDropdown" class="small-font">
            <option value="None">-</option>
            <option value="IMDScore">Index of Multiple Deprivation - Score</option>
            <option value="pop">Population</option>
            <option value="car_availability">Car Availability</option>
            <option value="pop_growth">Population Growth</option>
          </select>
          <br>
          <div class="field-container">
            <div>
              <div id="outlineRangeAmenitiesSlider"></div>
              <div class="slider-labels">
                <span id="outlineRangeAmenitiesMin"></span>
                <span id="outlineRangeAmenitiesMax"></span>
              </div>
            </div>
          </div>
          <div class="field-container">
            <div class="button-container">
              <button id="inverseOutlineScaleAmenitiesButton" class="small-button">Inverse Scale</button>
            </div>
          </div>
        </div>
      </div>
    </div>
<!--    <div id="Hexagons" class="panel">
      <button class="panel-header">Journey Time Catchments - Hexagons</button>
      <div id="panel-hexagons-content">
        <label for="yearHexagonsDropdown" class="large-font">Year:</label>
        <select id="yearHexagonsDropdown" class="medium-font">
          <option value="2024">2024</option>
        </select>
        <br>
        <label for="modeHexagonsDropdown" class="large-font">Mode of Travel:</label>
        <select id="modeHexagonsDropdown" class="medium-font">
          <option value="Wa">Walk</option>
          <option value="Cy">Cycle</option>
          <option value="PT">Public Transport</option>
          <option value="Ca">Car</option>
        </select>
      </div>
    </div>-->
    <div id="Census" class="panel">
      <button class="panel-header">Census / Local Plan Data</button>
      <div id="panel-content">
        <label for="baseColorCensus" class="large-font">Base Colour:</label>
        <select id="baseColorCensus" class="medium-font">
          <option value="#1f77b4">Blue</option>
          <option value="#ff7f0e">Orange</option>
          <option value="#2ca02c">Green</option>
          <option value="#d62728">Red</option>
          <option value="#9467bd">Purple</option>
          <option value="#8c564b">Brown</option>
          <option value="#e377c2">Pink</option>
          <option value="#7f7f7f">Gray</option>
        </select>
        <br>
        <label for="opacityFieldCensusDropdown" class="large-font">Hexagon Transparency</label>
        <select id="opacityFieldCensusDropdown" class="medium-font">
          <option value="None">-</option>
          <option value="pop">Population</option>
          <option value="jobs">Jobs</option>
          <option value="IMDScore">Index of Multiple Deprivation - Score</option>
          <option value="car_availability">Car Availability</option>
          <option value="pop_growth">Population Growth</option>
          <option value="jobs_growth">Jobs Growth</option>
          <option value="pop_fut">Future Population</option>
          <option value="jobs_fut">Future Jobs</option>
        </select>
        <br>
        <div class="field-container">
          <div>
            <div id="opacityRangeCensusSlider"></div>
            <div class="slider-labels">
              <span id="opacityRangeCensusMin"></span>
              <span id="opacityRangeCensusMax"></span>
            </div>
          </div>
        </div>
        <div class="field-container">
          <div class="button-container">
            <button id="inverseOpacityScaleCensusButton" class="small-button">Inverse Scale</button>
          </div>
        </div>
        <br>
        <label for="outlineFieldCensusDropdown" class="large-font">Hexagon Outline</label>
        <select id="outlineFieldCensusDropdown" class="medium-font">
          <option value="None">-</option>
          <option value="IMDScore">Index of Multiple Deprivation - Score</option>
          <option value="car_availability">Car Availability</option>
          <option value="jobs">Jobs</option>
          <option value="pop">Population</option>
          <option value="pop_growth">Population Growth</option>
          <option value="jobs_growth">Jobs Growth</option>
          <option value="pop_fut">Future Population</option>
          <option value="jobs_fut">Future Jobs</option>
        </select>
        <br>
        <div class="field-container">
          <div>
            <div id="outlineRangeCensusSlider"></div>
            <div class="slider-labels">
              <span id="outlineRangeCensusMin"></span>
              <span id="outlineRangeCensusMax"></span>
            </div>
          </div>
        </div>
        <div class="field-container">
          <div class="button-container">
            <button id="inverseOutlineScaleCensusButton" class="small-button">Inverse Scale</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="legend">
    <div class="legend-header">
      <h4 class="legend-title">Legend</h4>
      <span id="toggle-legend"></span>
    </div>
    <div id="legend-content-wrapper">
      <div class="legend-category" id="data-layer-category">
        <div class="legend-category-header">
          <span>Data Layer</span>
        </div>
        <div class="legend-category-content">
          <div id="legend-content"></div>
        </div>
      </div>
      <div class="legend-category">
        <div class="legend-category-header">
          <span>Geographies</span>
        </div>
        <div class="legend-category-content">
          <div>
            <input type="checkbox" id="uaBoundariesCheckbox"> <span style="font-size: 1em;">UA Boundaries (2024)</span>
          </div>
          <div>
            <input type="checkbox" id="wardBoundariesCheckbox"> <span style="font-size: 1em;">Ward Boundaries (2024)</span>
          </div>
          <div>
            <input type="checkbox" id="lsoaCheckbox"> <span style="font-size: 1em;">Lower Layer Super Output Areas (LSOA 2021)</span>
          </div>
          <div>
            <input type="checkbox" id="GrowthZonesCheckbox"> <span style="font-size: 1em;">Growth Zones</span>
          </div>
        </div>
      </div>
      <div class="legend-category">
        <div class="legend-category-header">
          <span>Infrastructure</span>
        </div>
        <div class="legend-category-content">
          <div>
            <input type="checkbox" id="amenitiesCheckbox"> <span style="font-size: 1em;">Amenities</span>
          </div>
          <div>
            <input type="checkbox" id="busStopsCheckbox"> <span style="font-size: 1em;">Bus Stops</span>
          </div>
          <div>
            <input type="checkbox" id="busLinesCheckbox"> <span style="font-size: 1em;">Bus Lines</span>
          </div>
          <div>
            <input type="checkbox" id="WestLinkZonesCheckbox"> <span style="font-size: 1em;">WESTlink Zones</span>
          </div>
          <div>
            <input type="checkbox" id="roadNetworkCheckbox"> <span style="font-size: 1em;">Road Network</span>
          </div>
        </div>
      </div>   
      <div class="legend-category">
        <div class="legend-category-header">
          <span>User Layers</span>
        </div>
        <div class="legend-category-content">
          <div id="userLayersContainer" class="user-layers-list"></div>
          
          <div style="margin-top: 10px; border-top: 1px solid #eee; padding-top: 10px;">
            <div class="file-upload-container" style="margin-bottom: 5px;">
              <label for="fileUpload" class="file-upload-label">
                <span>Upload file</span>
                <input type="file" id="fileUpload" accept=".geojson,.kml" />
              </label>
              <span id="fileNameDisplay"></span>
            </div>
            <button id="uploadButton" class="btn" disabled style="margin-bottom: 8px;">Upload</button>
          </div>
          <div class="drawing-tools" style="margin-top: 10px; border-top: 1px solid #eee; padding-top: 10px;">
            <div style="margin-bottom: 5px; font-weight: bold;">Draw on Map</div>
            <div class="draw-buttons">
              <button class="draw-button" id="drawPointBtn" title="Draw Points">
                <i class="fas fa-map-marker-alt"></i>
              </button>
              <button class="draw-button" id="drawLineBtn" title="Draw Lines">
                <i class="fas fa-route"></i>
              </button>
              <button class="draw-button" id="drawPolygonBtn" title="Draw Polygons">
                <i class="fas fa-draw-polygon"></i>
              </button>
            </div>
            <div style="margin-top: 5px;">
              <div id="drawing-instructions" style="font-size: 0.85em; color: #666; margin-bottom: 5px; display: none;">
                Click on map to place points. Press ESC to cancel.
              </div>
              <div id="save-drawing-container" style="display: none; margin-top: 8px;">
                <input type="text" id="drawingNameInput" placeholder="Enter layer name" style="width: calc(100% - 65px); padding: 4px; margin-right: 5px;">
                <button id="saveDrawingBtn" class="btn" style="width: 60px; padding: 4px;">Save</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="summary-panel">
    <button id="toggle-summary-panel" class="panel-header summary-header">Statistics Summary</button>
    <div id="summary-content" class="panel">
      <div>
        <label for="filterTypeDropdown">Area Type:</label>
        <select id="filterTypeDropdown" class="small-font">
          <option value="LA">Local Authority</option>
          <option value="Ward">Ward</option>
          <option value="GrowthZone">Growth Zone</option>
          <option value="WestLinkZone">WESTlink Zone</option>
          <option value="Range">Range (see Legend)</option>
        </select>
      </div>
      <div style="display: flex; align-items: center; margin-bottom: 5px;">
        <div style="margin-right: 10px;">
          <label for="filterValueDropdown">Area Name:</label>
        </div>
        <div style="margin-left: auto; white-space: nowrap; display: flex; align-items: center;">
          <label for="highlightAreaCheckbox" style="font-size: 1em; font-weight: normal; font-style: italic; margin: 0; margin-right: 5px;">Highlight Area on Map</label>
          <input type="checkbox" id="highlightAreaCheckbox" style="width: auto; margin: 0; padding: 0; height: auto;">
        </div>
      </div>
      <select id="filterValueDropdown" class="small-font" style="width: 100%; margin-bottom: 10px; margin-top: 2px;"></select>  
      <div style="margin-bottom: 15px;"></div>
      <table id="summary-table">
        <thead>
          <tr style="background-color: #f2f2f2;">
            <th id="metric-header">Metric</th>
            <th>Average</th>
            <th>Total</th>
            <th>Minimum</th>
            <th>Maximum</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td id="metric-row-1">Score</td>
            <td id="avg-score"></td>
            <td>-</td>
            <td id="min-score"></td>
            <td id="max-score"></td>
          </tr>
          <tr>
            <td id="metric-row-2">Score Percentile</td>
            <td id="avg-percentile"></td>
            <td>-</td>
            <td id="min-percentile"></td>
            <td id="max-percentile"></td>
          </tr>
          <tr>
            <td>Population</td>
            <td>-</td>
            <td id="total-population"></td>
            <td id="min-population"></td>
            <td id="max-population"></td>
          </tr>
          <tr>
            <td>IMD Score</td>
            <td id="avg-imd-score"></td>
            <td>-</td>
            <td id="min-imd-score"></td>
            <td id="max-imd-score"></td>
          </tr>
          <tr>
            <td>IMD Decile</td>
            <td id="avg-imd-decile"></td>
            <td>-</td>
            <td id="min-imd-decile"></td>
            <td id="max-imd-decile"></td>
          </tr>
          <tr>
            <td>Car Availability</td>
            <td id="avg-car-availability"></td>
            <td>-</td>
            <td id="min-car-availability"></td>
            <td id="max-car-availability"></td>
          </tr>
          <tr>
            <td>Population Growth</td>
            <td>-</td>
            <td id="total-growth-pop"></td>
            <td id="min-growth-pop"></td>
            <td id="max-growth-pop"></td>
          </tr>
        </tbody>
      </table>
      <div id="amenities-summary" style="margin-top: 15px;">
        <table id="amenities-table">
          <thead>
            <tr>
              <th>Amenity Type</th>
              <th>Count</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Primary Schools</td><td id="count-PriSch">-</td></tr>
            <tr><td>Secondary Schools</td><td id="count-SecSch">-</td></tr>
            <tr><td>Further Education</td><td id="count-FurEd">-</td></tr>
            <tr><td>Employment (500+)</td><td id="count-Em500">-</td></tr>
            <tr><td>Employment (5000+)</td><td id="count-Em5000">-</td></tr>
            <tr><td>Strategic Employment</td><td id="count-StrEmp">-</td></tr>
            <tr><td>City Centre</td><td id="count-CitCtr">-</td></tr>
            <tr><td>Major Centre</td><td id="count-MajCtr">-</td></tr>
            <tr><td>District Centre</td><td id="count-DisCtr">-</td></tr>
            <tr><td>General Practice</td><td id="count-GP">-</td></tr>
            <tr><td>Hospital</td><td id="count-Hos">-</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div id="attribute-editor-modal" style="display:none;" class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Feature Attributes</h3>
      </div>
      <div class="modal-body">
        <div id="attribute-fields-container">
          <!-- Default name field -->
          <div class="attribute-field">
            <div class="field-row">
              <input type="text" class="attribute-name" value="Name" readonly>
              <input type="text" class="attribute-value" placeholder="Enter name...">
            </div>
          </div>
          <!-- Additional fields will be added here -->
        </div>
        <button id="add-attribute-field" class="btn" style="margin-top: 10px;">Add New Attribute</button>
      </div>
      <div class="modal-footer">
        <button id="save-attributes" class="btn">Save</button>
        <button id="cancel-attributes" class="btn">Cancel</button>
      </div>
    </div>
  </div>
  <template id="user-layer-template">
    <div class="user-layer-item">
      <input type="checkbox" id="layer-check" checked>
      <span title="Layer Name">Layer Name</span>
      <div class="layer-controls">
        <button class="layer-style-btn" data-id="" title="Style layer">
          <i class="fas fa-palette"></i>
        </button>
        <button class="layer-edit-btn" data-id="" title="Edit layer">
          <i class="fas fa-edit"></i>
        </button>
        <button class="layer-zoom-btn" data-id="" title="Zoom to layer">
          <i class="fas fa-search-plus"></i>
        </button>
        <button class="layer-remove-btn" data-id="" title="Remove layer">
          <i class="fas fa-trash"></i>
        </button>
      </div>
    </div>
  </template>
  <template id="infrastructure-popup-template">
    <div class="infrastructure-popup">
      <div class="popup-header">
        <strong data-field="feature-type">Bus Stop</strong>
        <div class="page-indicator"><span data-field="current-index">1</span> of <span data-field="total-features">1</span></div>
      </div>
      <div class="combined-frequency-header" data-field="frequency-container" style="display:none">
        Combined AM Peak Frequency: <span data-field="combined-frequency">0</span> vph
      </div>
      <div class="popup-content" data-field="content">
      </div>
      <div class="popup-footer" data-field="footer" style="display:none">
        <button id="prev-feature" data-field="prev-btn">← Previous</button>
        <button id="next-feature" data-field="next-btn">Next →</button>
      </div>
    </div>
  </template>
  <template id="style-dialog-template">
    <div id="style-dialog" class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="style-dialog-title">Style: Layer Name</h3>
        </div>
        <div class="modal-body">
          <div class="style-section">
            <h4>Feature Style</h4>
            <div class="style-option">
              <div class="color-picker-row">
                <label>Colour:</label>
                <input type="color" id="feature-color" value="#000000">
                <div class="opacity-slider">
                  <label>Opacity:</label>
                  <input type="range" id="feature-opacity" min="0" max="100" value="75" class="slider">
                  <span id="feature-opacity-value">75%</span>
                </div>
              </div>
            </div>
            <div class="style-option">
              <div class="style-sub-option">
                <label>Weight/Size:</label>
                <input type="range" id="feature-size" min="1" max="10" value="3" class="slider">
                <span id="feature-size-value" class="style-value-display">3</span>
              </div>
              <div class="style-sub-option fill-options">
                <div class="color-picker-row">
                  <label>Fill Colour:</label>
                  <input type="color" id="feature-fill-color" value="#000000">
                  <div class="opacity-slider">
                    <label>Fill Opacity:</label>
                    <input type="range" id="feature-fill-opacity" min="0" max="100" value="30" class="slider">
                    <span id="feature-fill-opacity-value">30%</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="style-section">
            <h4>Label Style</h4>
            <div class="style-option">
              <label>Set from Attribute:</label>
              <select id="label-field" class="small-font">
                <option value="">None</option>
              </select>
              <div class="style-sub-option">
                <div class="color-picker-row">
                  <label>Colour:</label>
                  <input type="color" id="label-color" value="#000000">
                  <div class="opacity-slider">
                    <label>Opacity:</label>
                    <input type="range" id="label-opacity" min="0" max="100" value="100" class="slider">
                    <span id="label-opacity-value">100%</span>
                  </div>
                </div>
                <div class="style-sub-option">
                  <label>Size:</label>
                  <input type="range" id="label-size" min="8" max="24" value="12" class="slider">
                  <span id="label-size-value" class="style-value-display">12px</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="cancel-style" class="btn">Cancel</button>
          <button id="apply-style" class="btn">Apply</button>
        </div>
      </div>
    </div>
  </template>
  <script src="config.js"></script>
  <script src="main.js"></script>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1Z053ZVDTS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1Z053ZVDTS');
</script>
</body>

</html>
